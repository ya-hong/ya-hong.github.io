---
layout: post
title: 小Y和二叉树
subtitle: 清华集训2017
date: 2017-12-28
tags: 树
author: yanghong
header-img: images/cover/5.jpg
---

## 考虑第一个节点

考虑哪些点可以作为第一个点. 如果一个点$p$只有一个儿子$s$, 那么可以将$s$调整为右儿子, 然后将$p$及其所有祖先都调整成左儿子, 那么$p$点就可以成为序列的第一个点. 所以只要某点度数$\le 2$, 且有另一点可以作为根(度数小于等于2), 其就可以作为序列的第一个点 (然而肯定有另一点可以为根, 所以无需考虑) . 


## 推出一颗树

找到序列中的第一个点后, 就是分类讨论 **dfs** 了. 

可以以这样的顺序dfs: 

![](/images/2017-12-28-清华集训2017小Y和二叉树pic1.png) .

将树拆成两个部分: **一条链** 和 **若干子树**. 链上和树上的情况不同讨论:

1.  **树的情况** : (这里的情况简单一些, 所以先写) 
    对于点$p$, 在考虑到他的时候, 他的父节点已经确定, 而左右儿子不确定. 设$f(x)$表示以$x$的子树的最小字典序的中序遍历的第一个点. 那么将它的儿子按照$f(x)$ 排序, 确定左右关系. 
2.  **链的情况** : 
    对于点$p$, 在考虑到他的时候, 他的左儿子已经确定, 而父节点和右儿子不确定.
    + 两个儿子的情况. 中序遍历的访问顺序是 **左根右** 然后再是 **父节点** . 所以右节点是优先于父节点的. 那么将$f(x)$较小的放在右节点, 另一个放在父节点. 
    + 一个儿子的情况. 这个时候如何选择不会产生立即的影响(因为都是当前节点先放入序列), 然而它会对后面的选择造成影响(决定了是在链上还是在子树上). 考虑子树和链有什么不同: 一个被遍历到的节点若是放在链上, 那么他会立即放入序列; 若是放在子树上, 可以先取到子树中除去自己后中序遍历取到的最小第一个点. 那么可以再记一个$g(x)$ 表示子树中除去自己后中序遍历取到的最小第一个点, 显然$g(x) \ge f(x)$. 若$g(x) > f(x)$, 那么将他放在父节点上, 否则$g(x) = f(x)$, 将他放在右儿子上. 
