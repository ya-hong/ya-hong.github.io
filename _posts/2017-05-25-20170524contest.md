---
layout: post
title: 20170524练习赛
date: 2017-05-24
tags: 总结 COCI
cover: /images/cover/4.jpg
---



# Task1



由于受到了上一次考试的影响，我感觉第一题肯定要害人。。。。

然后想了很久之后觉得一开始想的就是对的，先枚举每个人的顺序，再dp一下就好了。



<!--more-->



# Task2



靠近的区域的所有控制点的值都减1，远离的区域所有控制的点的值都加1。

一开始想的很复杂，觉得要分9块区域做，同时维护区域里的控制点的个数。

![](/images/20170524练习赛pic1.png)

这样不仅复杂，而且维护控制点个数用的二维前缀和内存也开不下。



但是上下和左右其实是可以独立开的，就变成这样子了：

![](/images/20170524练习赛pic2.png)

![](/images/20170524练习赛pic3.png)

这样就好很多了，而且只需要记录一列（或一行）的个数就可以了。

这样应该是可以的了，但是由于各种原因，一个鬼畜的地方写错了。然后看不出来，不得不对拍一下，然后暴力又写错了。。。。。活活整了一个小时。

（~~然后这道题还有nlogn的臭臭算法~~）



# Task3



这道题应该是斜率优化的，但是由于考试的时候还不会这么搞，就整了一个二分的算法。

主要是推公式:
$$
\frac{sum(R)-sum(L)}{R-L} \ge res
$$

$$
sum(R)-sum(L) \ge res \cdot (R-L)
$$

$$
(sum(R)-R \cdot res) - (sum(L-1) - L \cdot res ) \ge 0
$$

那么就把 $$sum(x)-x \cdot res$$ 作为一个整体,对于二分出的一个答案$$res$$，只要找到一对$L$，$R$满足上面的式子而且$R-L$大于$K$就说明答案可行。



# Task4



这题只能用斜率优化了，但是由于考试的时候还不会这么搞。。。。然后就炸了。

主要还是推公式。。。。

设 $P_i$ 为第 $i$ 辆车开始制造的时间，$$S_x = \sum_{k=1}^x T_x$$ 。

对于第 $i$ 辆车,枚举每个人 $j$ ,就有：
$$
P_i + S_j \cdot F_i \ge P_{i-1} + S_{j+1} \cdot F_{i-1}
$$

$$
\Delta P_{i-1} = P_i - P{i-1}  \ge S_{j+1} \cdot F_{i-1} - S_j \cdot F_{i-1}
$$

$$
\Delta P_{i-1}  = \max( S_j+1 \cdot F_{i-1} - S_j \cdot F_{i-1} )
$$

$$
\Delta P_{i-1}  = \max( \frac {F_i} { F_{i-1} } \cdot S_{j+1} - S_j )
$$

设$k=\frac{F_{i-1}}{F_i}$,$x=S_j+1$,$y=S_j$

然后就是转换为线性规划的题了。然后可以求出所有$$\Delta P_x$$，那么可以求出第m辆车的造车时间，然后由于是不停留的，再加上 $$\sum _{i=1}^n F_m \cdot T_i$$ 就可以求出最后答案。



# 总结

**炸个屁掉**