---
layout: post
title: 小Y和地铁
subtitle: 清华集训2017
date: 2017-12-28
tags: dfs
author: yanghong
header-img: images/cover/2.jpg
---

奇奇怪怪的题. 

## 瞎几把乱搞

观察样例发现, 连边的方式非常变态..... 两个点可以有8种连边方式, 那么直接暴力的复杂度就是 $O(n \times 8^{n/2})$. 

## 科学的搜索

虽然两个点的连边有8种方式, 但是有很多的作用是相同的:

![](/images/2017-12-28-清华集训2017小Y和地铁pic1.png)
![](/images/2017-12-28-清华集训2017小Y和地铁pic2.png)

一种连边的方式和另一种和他完全相反的连边方式的作用是相同的, 因为对于任意另一条边, 要么和他们都相交, 要么都不相交. 所以连边的方式就降低为4种. 为了方便, 可以都取朝向右边的部分. 

对于一系列编号相同的两个点$(l,r)$, 将他们按照$l$排序. 由于前面都取了朝向右边的部分, 那么$l$是不会再被穿过的, 而$r$一旦被其他边包含就一定会产生一个交点. 所以每种连边的方式只有$r$取的位置会对后面产生影响, 而$r$的位置只有两种情况(上面和下面). 

如此的复杂度就是$\mathcal{O}(2^{n/2})$ . 

